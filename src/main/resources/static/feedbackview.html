<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Feedback View</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f4f7fc;
        }

        /* Navbar styles */
        .navbar {
          display: flex;
          justify-content: space-between;
          align-items: center;
          background-color: #2c3e50;
          padding: 10px 30px;
        }

        .navbar .brand {
          color: white;
          font-size: 20px;
          font-weight: bold;
          text-decoration: none;
        }

        .navbar .nav-links {
          display: flex;
          gap: 20px;
        }

        .navbar .nav-links a {
          color: white;
          text-decoration: none;
          font-size: 14px;
          padding: 8px 14px;
          border-radius: 6px;
          transition: background 0.3s;
        }

        .navbar .nav-links a:hover {
          background-color: #34495e;
        }

        .navbar .nav-links a.active-link {
          background-color: #32cd32;
        }

        /* Main content */
        .main-content {
            padding: 30px;
        }

        h2 {
            margin-bottom: 20px;
            color: #333;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
            border-radius: 8px;
            overflow: hidden;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
            color: #333;
        }

        td {
            color: #555;
        }
    </style>
</head>
<body>

	<!-- Navbar -->
	 <div class="navbar">
	   <a href="#" class="brand">HealthMate Admin</a>
	   <div class="nav-links">
	     <a href="#" class="active-link">üè† Dashboard</a>
	     <a href="Alluserview.html">üë• Manage Users</a>
	     <a href="diseaseinfo.html">üß¨ Disease Panel</a> <!-- ‚úÖ Added Disease Panel -->
	     <a href="pdf_fetch.html">üìä Reports</a>
	     <a href="feedbackview.html">üì¨ View Feedbacks</a>
	     <a href="#">‚öôÔ∏è Settings</a>
	     <a href="#" onclick="logout()">üö™ Logout</a>
	   </div>
	 </div>

  <!-- Main content -->
  <div class="main-content">
      <h2>All Feedback</h2>

      <table id="feedbackTable">
          <thead>
              <tr>
                  <th>ID</th>
                  <th>Email</th>
                  <th>Message</th>
                  <th>Rating</th>
              </tr>
          </thead>
          <tbody id="feedbackBody">
              <!-- Feedback rows will appear here -->
          </tbody>
      </table>
  </div>

  <script>
      function logout() {
          window.location.href = "Adminlogin.html";
      }

      window.onload = function () {
          fetch('http://localhost:7469/api/feedback/feedback')
              .then(response => {
                  if (!response.ok) {
                      throw new Error("No content or error occurred.");
                  }
                  return response.json();
              })
              .then(data => {
                  const tbody = document.getElementById('feedbackBody');
                  tbody.innerHTML = '';

                  data.forEach(item => {
                      const row = `<tr>
                          <td>${item.id}</td>
                          <td>${item.email}</td>
                          <td>${item.message}</td>
                          <td>${item.ratting}</td>
                      </tr>`;
                      tbody.innerHTML += row;
                  });
              })
              .catch(error => {
                  alert("No feedback found or server error.");
                  console.error(error);
              });
      };
  </script>

</body>
</html>
